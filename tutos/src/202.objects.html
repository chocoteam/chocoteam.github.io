<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Objects in Choco &mdash; choco-tuto 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="choco-tuto 1.0.0 documentation" href="../index.html" />
    <link rel="next" title="Playing around with 8-queens puzzle" href="203.firstexample2.html" />
    <link rel="prev" title="A first example" href="201.firstexample.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="objects-in-choco">
<h1>Objects in Choco<a class="headerlink" href="#objects-in-choco" title="Permalink to this headline">¶</a></h1>
<p>The content of this section is extracted from the Javadoc and the Choco&#8217;s User Guide.
Here, we <strong>briefly</strong> described the main aspects of the most commonly used objects.
This does not aim at being complete: it covers the basic information.</p>
<div class="section" id="the-model">
<h2>The <cite>Model</cite><a class="headerlink" href="#the-model" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Model</span> <span class="n">model</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Model</span><span class="o">(</span><span class="s">&quot;My model&quot;</span><span class="o">);</span>
</pre></div>
</div>
<p>As said before, the <cite>Model</cite> is a key component of the library.
It has to be the first instruction declared, since it provides
entry point methods that help modelling a problem.</p>
<p>A good habit is to declare a model with a name, otherwise
a random one will be assigned by default.</p>
<p>We designed the model in such a way that you can reach almost
everything needed to describe a problem from it.</p>
<p>For example, it stores its variables and constraints.
Variables and constraints of a model can be retrieved thanks to API :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="na">retrieveIntVars</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span> <span class="c1">// extract IntVars, including BoolVars</span>
<span class="n">model</span><span class="o">.</span><span class="na">getCstrs</span><span class="o">();</span> <span class="c1">// extract posted constraints</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We strongly encourage you to attach the Javadoc (provides either on the website or on Maven Central Repository)
to the library in your IDE.</p>
</div>
</div>
<div class="section" id="the-variables">
<h2>The <cite>Variables</cite><a class="headerlink" href="#the-variables" title="Permalink to this headline">¶</a></h2>
<p>A variable is an <em>unknown</em>, mathematically speaking.
In a solution of a given problem (considering that at least one exists),
each variable is assigned to a <em>value</em> selected within its domain.
The notion of <em>value</em> differs from one type of variable to the other.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A variable can be declared in only one model at a time.
Indeed, a reference to the declaring model is maintained in it.</p>
</div>
<div class="section" id="integer-variable">
<h3>Integer variable<a class="headerlink" href="#integer-variable" title="Permalink to this headline">¶</a></h3>
<p>An integer variable, <cite>IntVar</cite>, should be assigned to an integer.
There are many ways to declare an <cite>IntVar</cite></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// A variable with a unique value in its domain, in other words, a constant</span>
<span class="n">IntVar</span> <span class="n">two</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="na">intVar</span><span class="o">(</span><span class="s">&quot;TWO&quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
<span class="c1">// Any value in [1..4] can be assigned to this variable</span>
<span class="n">IntVar</span> <span class="n">x</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="na">intVar</span><span class="o">(</span><span class="s">&quot;X&quot;</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">4</span><span class="o">);</span>
<span class="c1">// Only the values 1, 3 and 4 can be assigned to this variable</span>
<span class="n">IntVar</span> <span class="n">y</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="na">intVar</span><span class="o">(</span><span class="s">&quot;X&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="mi">1</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">});</span>
</pre></div>
</div>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p>Declaring a variable with an <em>infinite</em> domain, like :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">model</span><span class="o">.</span><span class="na">intVar</span><span class="o">(</span><span class="s">&quot;X&quot;</span><span class="o">,</span> <span class="n">Integer</span><span class="o">.</span><span class="na">MIN_VALUE</span><span class="o">,</span> <span class="n">Integer</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">)</span>
</pre></div>
</div>
<p>is clearly a bad idea.</p>
<p class="last">Too large domains may lead to underflow or overflow issues and most of the time,
even if Choco will finally compute the right bounds by itself, you certainly want to save space and time
by directly declaring relevant bounds.</p>
</div>
<p>The domain of an integer variable in Choco can either be <em>bounded</em> or <em>enumerated</em>.
In a bounded domain, only current bounds are stored in memory.
This saves memory (only two integers are needed) but it restricts its usage:
there is no possibility to make holes in it.</p>
<p>On the contrary, with an enumerated domain, all possible values are explicitly stored in memory.
This consumes more memory (one integer and a bitset &#8211; many longs &#8211; are needed) but it allows
making holes in it.</p>
<div class="admonition-modelling-bounded-or-enumerated admonition">
<p class="first admonition-title"><strong>Modelling</strong>: Bounded or Enumerated?</p>
<p>The memory consumption should not be the only criterion to consider when one needs to choose
between one representation and the other.
Indeed, the <em>filtering</em> strength of the model, through constraints, has to be considered too.
For instance, some constraints can only deduce bound updates, in that case bounded domains fit the need.
Other constraints can make holes in variables&#8217; domain, in that case enumerated domains are relevant.</p>
<p>If you don&#8217;t know what to do, the following scenario can be applied:</p>
<blockquote class="last">
<div><ul class="simple">
<li>domain&#8217;s cardinality greater than 262144 should be bounded</li>
<li>domain&#8217;s cardinality smaller than 32768 can be enumerated without loss of efficiency</li>
<li>in any case, empirical evaluation is a good habit.</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="boolean-variable">
<h3>Boolean variable<a class="headerlink" href="#boolean-variable" title="Permalink to this headline">¶</a></h3>
<p>An boolean variable, <cite>BoolVar</cite>, should be assigned to a boolean.
A <cite>BoolVar</cite> is a specific <cite>IntVar</cite> with a domain restricted to <span class="math">\([0,1]\)</span>,
0 stands for <cite>false</cite>, 1 for <cite>true</cite>.
Thus a <cite>BoolVar</cite> can be declared in any integer constraint (<em>e.g.</em>, a sum) and boolean constraints (<em>e.g.</em>, in clauses store).</p>
<p>Here is the common way to declare a <cite>BoolVar</cite></p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// A [0,1]-variable</span>
<span class="n">BoolVar</span> <span class="n">b</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="na">boolVar</span><span class="o">(</span><span class="s">&quot;b&quot;</span><span class="o">);</span>
</pre></div>
</div>
</div>
<div class="section" id="set-variable">
<h3>Set variable<a class="headerlink" href="#set-variable" title="Permalink to this headline">¶</a></h3>
<p>A set variable, <cite>SetVar</cite>, should be assigned to a set of integers (possibly empty or singleton).
Its domain is defined by a set of intervals <cite>[LB,UB]</cite> where
<cite>LB</cite> denotes the integers that figure in all solutions
and <cite>UB</cite> the integers that potentially figure in a solution.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// SetVar representing a subset of {1,2,3,5,12}</span>
<span class="n">SetVar</span> <span class="n">y</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="na">setVar</span><span class="o">(</span><span class="s">&quot;y&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[]{},</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">5</span><span class="o">,</span><span class="mi">12</span><span class="o">});</span>
<span class="c1">// possible values: {}, {2}, {1,3,5} ...</span>
</pre></div>
</div>
</div>
<div class="section" id="real-variable">
<h3>Real variable<a class="headerlink" href="#real-variable" title="Permalink to this headline">¶</a></h3>
<p>A real variable, <cite>RealVar</cite>, should be assigned an interval of doubles.
Its domain is defined by its bounds and a <em>precision</em>.
The precision parameter helps considering a real variable as instantiated:
when the distance between the two bounds is less than or equal to the precision.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// A [0.2d, 3.4d]-variable, with a precision of 0.001d</span>
<span class="n">RealVar</span> <span class="n">x</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="na">realVar</span><span class="o">(</span><span class="s">&quot;x&quot;</span><span class="o">,</span> <span class="mf">0.2d</span><span class="o">,</span> <span class="mf">3.4d</span><span class="o">,</span> <span class="mf">0.001d</span><span class="o">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Using <cite>RealVar</cite> requires to install <a class="reference external" href="http://www.ibx-lib.org">Ibex</a> before.
Indeed, Choco relies on Ibex to deal with continuous constraints.</p>
</div>
</div>
</div>
<div class="section" id="the-constraints">
<h2>The <cite>Constraints</cite><a class="headerlink" href="#the-constraints" title="Permalink to this headline">¶</a></h2>
<p>A constraint is a relation between one or more variables of a model.
It defines conditions over these variables that must be respected in a solution.
A constraint has a semantic (<em>e.g.</em>, &#8220;greater than&#8221; or &#8220;all different&#8221;)
and is equipped with <em>filtering algorithms</em> that ensure conditions induced by the semantic hold.</p>
<p>A filtering algorithm, or <em>propagator</em>, removes from variables&#8217; domain values that cannot appear in any solution.
A propagator has a <em>filtering strength</em> and a time complexity to achieve it.
The filtering strength, or <em>level of consistency</em>, determines how accurate a propagator is when values to removed are detected,</p>
<div class="section" id="posting-a-constraint">
<h3>Posting a constraint<a class="headerlink" href="#posting-a-constraint" title="Permalink to this headline">¶</a></h3>
<p>For a constraint to be integrated in a model, a call to <cite>post()</cite> is required :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// x and y must be different in any solution</span>
<span class="n">model</span><span class="o">.</span><span class="na">arithm</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="s">&quot;!=&quot;</span><span class="o">,</span> <span class="n">y</span><span class="o">).</span><span class="na">post</span><span class="o">();</span>
<span class="c1">// or, in a more verbose way</span>
<span class="n">model</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="n">model</span><span class="o">.</span><span class="na">arithm</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="s">&quot;&lt;&quot;</span><span class="o">,</span> <span class="n">z</span><span class="o">));</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A constraint can be posted in only one model at a time.
Indeed, a reference to the declaring model is maintained in it.</p>
</div>
<p>Once posted, a constraint is known from a model and will be integrated in the filtering loop.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Posting a constraint does not remove any value from its variables&#8217; domain.
Indeed, Choco runs the <em>initial propagation</em> only when a resolution is called.</p>
</div>
<p>The only reason why a constraint is not posted a model is to <em>reify</em> it.</p>
</div>
<div class="section" id="reifying-a-constraint">
<h3>Reifying a constraint<a class="headerlink" href="#reifying-a-constraint" title="Permalink to this headline">¶</a></h3>
<p>Alternatively, a constraint can be reified with a <cite>BoolVar</cite> :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="c1">// the constraint is reified with `b`</span>
<span class="n">BoolVar</span> <span class="n">r1</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="na">arithm</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="s">&quot;!=&quot;</span><span class="o">,</span> <span class="n">y</span><span class="o">).</span><span class="na">reify</span><span class="o">();</span>
<span class="c1">// equivalent to:</span>
<span class="n">BoolVar</span> <span class="n">r2</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="na">boolVar</span><span class="o">(</span><span class="s">&quot;r2&quot;</span><span class="o">);</span>
<span class="n">model</span><span class="o">.</span><span class="na">arithm</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="s">&quot;&lt;&quot;</span><span class="o">,</span> <span class="n">z</span><span class="o">).</span><span class="na">reifyWith</span><span class="o">(</span><span class="n">r2</span><span class="o">);</span>
</pre></div>
</div>
<p>The <cite>BoolVar</cite> that reifies a constraint represents whether or not a constraint is satisfied.
If the constraint is satisfied, the boolean variable is set to <cite>true</cite>, <cite>false</cite> otherwise.
If the boolean variable is set to <cite>true</cite> the constraint should be satisfied, unsatisfied otherwise.</p>
<p>Reifying constraints is helpful to express conditions like: <cite>(x = y) xor (x &gt; 15)</cite> :</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">BoolVar</span> <span class="n">c1</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="na">arithm</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="s">&quot;=&quot;</span><span class="o">,</span> <span class="n">y</span><span class="o">).</span><span class="na">reify</span><span class="o">();</span>
<span class="n">BoolVar</span> <span class="n">c2</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="na">arithm</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="s">&quot;&gt;&quot;</span><span class="o">,</span> <span class="mi">15</span><span class="o">).</span><span class="na">reify</span><span class="o">();</span>
<span class="n">model</span><span class="o">.</span><span class="na">arithm</span><span class="o">(</span><span class="n">c1</span><span class="o">,</span> <span class="s">&quot;+&quot;</span><span class="o">,</span> <span class="n">c2</span><span class="o">,</span> <span class="s">&quot;=&quot;</span><span class="o">,</span> <span class="mi">1</span><span class="o">).</span><span class="na">post</span><span class="o">();</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">A reified constraint <strong>should not</strong> be posted.
Indeed, posting it will declare it as a <em>hard</em> constraint, to be satisfied,
reifying it will declare it as a <em>soft</em> constraint, that can be unsatisfied.
Both state cannot co-exist simultaneously: hard state dominates soft one.</p>
</div>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">A constraint that is neither posted or reified <strong>is not considered at all</strong> in the resolution.
Make sure all constraints are either posted or reified.</p>
</div>
<p>There are more than 80 constraints in Choco, and anyone can create its own constraint easily.
Native constraints are provided by the model, as seen before.
A look at the Javadoc gives a big picture of the ones available.
In this tutorial, we will have a look at the most commonly used ones.</p>
</div>
</div>
<div class="section" id="the-solver">
<h2>The <cite>Solver</cite><a class="headerlink" href="#the-solver" title="Permalink to this headline">¶</a></h2>
<p>The <cite>Model</cite> serves at describing the problem with variables and constraints.
The resolution is managed by the <cite>Solver</cite>.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Model</span> <span class="n">model</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Model</span><span class="o">(</span><span class="s">&quot;My problem&quot;</span><span class="o">);</span>
<span class="c1">// variables declaration</span>
<span class="c1">// constraints declaration</span>
<span class="n">Solver</span> <span class="n">solver</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="na">getSolver</span><span class="o">();</span>
<span class="n">Solution</span> <span class="n">solution</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="na">findSolution</span><span class="o">();</span>
</pre></div>
</div>
<p>Having access to the <cite>Solver</cite> is needed to tune the resolution and launch it.
It provides methods to configure <em>search strategies</em>, to define resolution goals
(<em>i.e.</em>, finding one solution, all solutions or optimal solutions) and getting resolution
statistics.</p>
<p>Instead of listing all resolution features, we will see some of them in the following.</p>
</div>
<div class="section" id="modelling-and-solving">
<h2>Modelling and Solving<a class="headerlink" href="#modelling-and-solving" title="Permalink to this headline">¶</a></h2>
<p>Carefully selecting variables and constraints to describe a problem in a model is a tough task to do.
Indeed, some knowledge of the available constraints (or their reformulations), their filtering strength and complexity,
is needed to take advantage of Constraint Programming. This has to be both taught and experimented.
Same goes with the resolution tuning. Using Choco has a black-box solver results in good performance on average.
But, injecting problem expertise in the search process is a key component of success.
Choco offers a large range of features to let you good chances to master your problem.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">choco-tuto</a></h1>





<p>
<iframe src="https://ghbtns.com/github-btn.html?user=&repo=&type=watch&count=true&size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>




<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="001.introduction.html">Introduction to choco-tuto</a></li>
<li class="toctree-l1"><a class="reference internal" href="002.history.html">Choco, a constraint programming java library</a></li>
<li class="toctree-l1"><a class="reference internal" href="003.installation.html">Installation</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="201.firstexample.html">A first example</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Objects in Choco</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-model">The <cite>Model</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-variables">The <cite>Variables</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-constraints">The <cite>Constraints</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-solver">The <cite>Solver</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="#modelling-and-solving">Modelling and Solving</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="203.firstexample2.html">Playing around with 8-queens puzzle</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="301.description.html">Verbal arithmetic</a></li>
<li class="toctree-l1"><a class="reference internal" href="401.description.html">Warehouse Location Problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="501.description.html">Aircraft Landing Problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="601.description.html">Nonogram</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="201.firstexample.html" title="previous chapter">A first example</a></li>
      <li>Next: <a href="203.firstexample2.html" title="next chapter">Playing around with 8-queens puzzle</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Charles Prud'homme.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.7</a>
      
      |
      <a href="../_sources/src/202.objects.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>