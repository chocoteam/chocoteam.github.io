<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>A first example &mdash; choco-tuto 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="choco-tuto 1.0.0 documentation" href="../index.html" />
    <link rel="next" title="Objects in Choco" href="202.objects.html" />
    <link rel="prev" title="Installation" href="003.installation.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="a-first-example">
<h1>A first example<a class="headerlink" href="#a-first-example" title="Permalink to this headline">¶</a></h1>
<div class="section" id="modelling-the-eight-queens-puzzle">
<h2>Modelling the eight queens puzzle<a class="headerlink" href="#modelling-the-eight-queens-puzzle" title="Permalink to this headline">¶</a></h2>
<p>First of all, let&#8217;s consider the eight queen puzzle,
frequently used to introduce constraint programming.</p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Eight_queens_puzzle">Wikipedia</a> told us that:</p>
<blockquote>
<div>The eight queens puzzle is the problem of placing eight chess queens on an 8x8 chessboard
so that no two queens threaten each other.
Thus, a solution requires that no two queens share the same row, column, or diagonal.</div></blockquote>
<p>The problem can be generalized to the <em>n</em>-queens problem (placing <em>n</em> queens on a nxn chessboard).</p>
<p>There are many ways to model this problem with Choco, we will start with a basic one:</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">8</span><span class="o">;</span>
<span class="hll"><span class="n">Model</span> <span class="n">model</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Model</span><span class="o">(</span><span class="n">n</span> <span class="o">+</span> <span class="s">&quot;-queens problem&quot;</span><span class="o">);</span>
</span><span class="hll"><span class="n">IntVar</span><span class="o">[]</span> <span class="n">vars</span> <span class="o">=</span> <span class="k">new</span> <span class="n">IntVar</span><span class="o">[</span><span class="n">n</span><span class="o">];</span>
</span><span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">q</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">q</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="n">q</span><span class="o">++){</span>
<span class="hll">    <span class="n">vars</span><span class="o">[</span><span class="n">q</span><span class="o">]</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="na">intVar</span><span class="o">(</span><span class="s">&quot;Q_&quot;</span><span class="o">+</span><span class="n">q</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="n">n</span><span class="o">);</span>
</span><span class="o">}</span>
<span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span>  <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="n">j</span><span class="o">++){</span>
<span class="hll">        <span class="n">model</span><span class="o">.</span><span class="na">arithm</span><span class="o">(</span><span class="n">vars</span><span class="o">[</span><span class="n">i</span><span class="o">],</span> <span class="s">&quot;!=&quot;</span><span class="o">,</span><span class="n">vars</span><span class="o">[</span><span class="n">j</span><span class="o">]).</span><span class="na">post</span><span class="o">();</span>
</span><span class="hll">        <span class="n">model</span><span class="o">.</span><span class="na">arithm</span><span class="o">(</span><span class="n">vars</span><span class="o">[</span><span class="n">i</span><span class="o">],</span> <span class="s">&quot;!=&quot;</span><span class="o">,</span> <span class="n">vars</span><span class="o">[</span><span class="n">j</span><span class="o">],</span> <span class="s">&quot;-&quot;</span><span class="o">,</span> <span class="n">j</span> <span class="o">-</span> <span class="n">i</span><span class="o">).</span><span class="na">post</span><span class="o">();</span>
</span><span class="hll">        <span class="n">model</span><span class="o">.</span><span class="na">arithm</span><span class="o">(</span><span class="n">vars</span><span class="o">[</span><span class="n">i</span><span class="o">],</span> <span class="s">&quot;!=&quot;</span><span class="o">,</span> <span class="n">vars</span><span class="o">[</span><span class="n">j</span><span class="o">],</span> <span class="s">&quot;+&quot;</span><span class="o">,</span> <span class="n">j</span> <span class="o">-</span> <span class="n">i</span><span class="o">).</span><span class="na">post</span><span class="o">();</span>
</span>    <span class="o">}</span>
<span class="o">}</span>
<span class="hll"><span class="n">Solution</span> <span class="n">solution</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="na">getSolver</span><span class="o">().</span><span class="na">findSolution</span><span class="o">();</span>
</span><span class="k">if</span><span class="o">(</span><span class="n">solution</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">solution</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>If you copy/paste the this code and execute it, it prints
the value that each variable takes in the solution on the console</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Solution</span><span class="p">:</span> <span class="n">Q_0</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">Q_1</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">Q_2</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">Q_3</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">Q_4</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">Q_5</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">Q_6</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">Q_7</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
</pre></div>
</div>
<p>Now, let&#8217;s discuss the code.</p>
<div class="section" id="the-model">
<h3>The model<a class="headerlink" href="#the-model" title="Permalink to this headline">¶</a></h3>
<p>On line 2, a <em>model</em> is declared.
It is the key component of the library and needed to describe any problem.</p>
</div>
<div class="section" id="the-variables">
<h3>The variables<a class="headerlink" href="#the-variables" title="Permalink to this headline">¶</a></h3>
<p>A queen position is defined by its coordinates on the chessboard.
Naturally, we don&#8217;t know yet where to put queens on the chessboard,
but we can give indications.
To do so, we need to declare <em>variables</em>.</p>
<p>A variable is an <em>unknown</em> which has to be assigned to value in a solution.
The values a variable can take is defined by its domain.</p>
<p>Here, in a solution, there will be exactly one queen per row (and per column).
So, a modelling trick is to fix the row a queen can go to and only question on their column.
Thus, there will be <em>n</em> queens (one per row), each of them to be assigned to one column, among <span class="math">\([1,n]\)</span>.</p>
<p>Lines 3 and 5 managed to create variables and their domain.</p>
</div>
<div class="section" id="the-constraints">
<h3>The constraints<a class="headerlink" href="#the-constraints" title="Permalink to this headline">¶</a></h3>
<p>The queens&#8217; position must follow some rules.
We already encoded that there can only be one queen per row.
Now, we have to ensure that, on any solution, no two queens share the same column and diagonal.</p>
<p>First, the columns conditions: if the queen <em>i</em> is on column <em>k</em>, then any other queens cannot take the value <em>k</em>.
So, for each pair of queens, the two related variables cannot be assigned to the same value.
This is expressed by the <em>constraint</em> on line 9.
To activate the constraint, it has to be <em>posted</em>.</p>
<p>Second, the diagonals: we have to consider the two orthogonal diagonals.
If the queen <em>i</em> is on column <em>k</em>, then, the queen <em>i+1</em> cannot be assigned to <em>k+1</em>.
More generally, the queen <em>i+m</em> cannot be assigned to <em>k+m</em>.
The same goes with the other diagonal.
This is declared on line 10 and 11.</p>
</div>
<div class="section" id="solving-the-problem">
<h3>Solving the problem<a class="headerlink" href="#solving-the-problem" title="Permalink to this headline">¶</a></h3>
<p>Once the problem has been described into a model using variables and constraints,
its satisfaction can be evaluated, by trying to <em>solve</em> it.</p>
<p>This is achieved on line 14 by calling the <cite>getSolver().findSolution()</cite> method from the model.
If a solution exists, it is printed on the console</p>
</div>
</div>
<div class="section" id="what-to-do-next">
<h2>What to do next ?<a class="headerlink" href="#what-to-do-next" title="Permalink to this headline">¶</a></h2>
<p>We are going to use and extend this small problem in the future.
But before, we will have a look at the different objects we can manipulate.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">choco-tuto</a></h1>





<p>
<iframe src="https://ghbtns.com/github-btn.html?user=&repo=&type=watch&count=true&size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>




<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="001.introduction.html">Introduction to choco-tuto</a></li>
<li class="toctree-l1"><a class="reference internal" href="002.history.html">Choco, a constraint programming java library</a></li>
<li class="toctree-l1"><a class="reference internal" href="003.installation.html">Installation</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">A first example</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#modelling-the-eight-queens-puzzle">Modelling the eight queens puzzle</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-to-do-next">What to do next ?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="202.objects.html">Objects in Choco</a></li>
<li class="toctree-l1"><a class="reference internal" href="203.firstexample2.html">Playing around with 8-queens puzzle</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="301.description.html">Verbal arithmetic</a></li>
<li class="toctree-l1"><a class="reference internal" href="401.description.html">Warehouse Location Problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="501.description.html">Aircraft Landing Problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="601.description.html">Nonogram</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="003.installation.html" title="previous chapter">Installation</a></li>
      <li>Next: <a href="202.objects.html" title="next chapter">Objects in Choco</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Charles Prud'homme.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.7</a>
      
      |
      <a href="../_sources/src/201.firstexample.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>